<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deep Coffee ç·šä¸Šé»é¤</title>

    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Dancing+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Chenyu-otf/chenyuluoyan_thin@main/ChenYuluoyan-2.0-Thin.ttf">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap');
        /* 1. æ­£ç¢ºè¼‰å…¥å­—é«”æª”æ¡ˆ */
        @font-face {
            font-family: 'ChenYuLuoYan';
            /* ä½¿ç”¨ 2.0 æœ€æ–°ç‰ˆæœ¬è·¯å¾‘ */
            src: url('https://cdn.jsdelivr.net/gh/Chenyu-otf/chenyuluoyan_thin@main/ChenYuluoyan-2.0-Thin.ttf') format('truetype');
            font-display: swap; /* ç¢ºä¿ç¶²é è¼‰å…¥æ™‚å­—é«”ä¸ç•™ç™½ */
        }
        /* 2. å…¨åŸŸæ”¾å¤§è¨­å®š */
        html {
            /* å°‡åŸºç¤å­—ç´šå¾é è¨­çš„ 16px æå‡åˆ° 20px */
            font-size: 20px;
        }
        
        :root {
            --primary: #9f9fb8;
            --accent: #353569; /* ç¨å¾®æ·±ä¸€é»ï¼Œæ‰‹å¯«å­—æ‰æ¸…æ™° */
        }

        /* 2. å¼·åˆ¶å¥—ç”¨è‡³æ‰€æœ‰å…ƒç´  */
        *, body, html, input, button, select, textarea {
            /* é€™è£¡çš„åç¨±å¿…é ˆèˆ‡ä¸Šæ–¹ @font-face å®šç¾©çš„ä¸€è‡´ */
            font-family: 'Caveat', 'ChenYuLuoYan', "Microsoft JhengHei", sans-serif !important;
            -webkit-font-smoothing: antialiased;line-height: 1.6;
        }

        body {
            margin: 0; padding: 0; height: 100%; width: 100%;
            overflow: hidden; 
            background-color: #F8FBF8; /* é­šè‚šç™½ */
            user-select: none;
            -webkit-user-select: none;
            color: var(--accent);
        }

        /* 3. é‡å°ç‰¹å®šå…ƒä»¶é€²ä¸€æ­¥æ”¾å¤§ */
        h1 { font-size: 2.2rem; } /* æ¨™é¡Œ */
        h3 { font-size: 1.8rem; } /* Menu æ¨™é¡Œ */

        /* ä¿ç•™ç‰¹å®šçš„è‹±æ–‡æ‰‹å¯«é¢¨æ ¼ */
        .handwriting-elegant {
            font-family: 'Dancing Script', cursive !important;
            font-size: 1.8rem;
        }

        .handwriting-natural {
            font-family: 'Caveat', cursive !important;
            font-size: 1.6rem;
            letter-spacing: 1px;
        }
        
        /* é‡å°é—œæ–¼é é¢æˆ–æ³¨æ„äº‹é …çš„é•·æ–‡å­— */
        .chinese-handwriting {
            width: 100%;
            max-width: 90%; /* ç•™ä¸€é»å·¦å³å‘¼å¸ç©ºé–“ */
            margin: 0 auto;
        }

        .slider-container { 
            display: flex; width: 600%; height: 100vh; 
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
            touch-action: pan-y; margin: 0;  /* ğŸ’¡ ç¢ºä¿æ²’æœ‰å¤–é‚Šè· */
            padding: 0; /* ğŸ’¡ ç¢ºä¿æ²’æœ‰å…§é‚Šè· */;
        }
        
        .page {
            width: 100vw !important;
            height: 100vh; /* ç¢ºä¿ä½”æ»¿å…¨è¢å¹•é«˜åº¦ */
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; /* ğŸ’¡ é€™æ˜¯å‚ç›´ç½®ä¸­çš„é—œéµ */
            padding: 0; /* ğŸ’¡ å…ˆå°‡ padding è¨­ç‚º 0ï¼Œé¿å…æ¨æ“ å…§å®¹ */
            margin: 0;
            box-sizing: border-box;
            flex-shrink: 0;
            overflow-x: hidden;
            position: relative;
        }

        .content-card { 
            background: none; 
            box-shadow: none;
            padding: 0; /* ğŸ’¡ ç§»é™¤å…§è·ï¼Œè®“ç½®ä¸­æ›´ç²¾ç¢º */
            width: 90%; 
            max-width: 800px; 
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* ğŸ’¡ æ ¸å¿ƒï¼šé˜²æ­¢é•·æ–‡å­—æ’ç ´ç‰ˆé¢ */
            overflow-wrap: break-word;
            word-wrap: break-word;
        }

        .page:not(.page-p1)::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;transform: translateY(-20px);
        }
        
        /* ğŸ’¡ è®“é¦–é  Logo é é”æˆå®Œç¾å‚ç›´æ°´å¹³ç½®ä¸­ */
        .page-p1 .content-card {
            /* æ ¸å¿ƒï¼šè‡ªå‹•æ¨é–‹ä¸Šä¸‹ç©ºé–“ï¼Œé”æˆçµ•å°å‚ç›´ç½®ä¸­ */
            margin: auto 0 !important; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: auto;
        }

        /* ğŸ’¡ ç¢ºä¿é¦–é çš„ Footer ä¸æœƒæ¨æ“ åˆ°å…§å®¹ä½ç½® */
        .page-p1 .nav-footer {
            margin-top: 0; 
            position: absolute; /* åƒ…åœ¨é¦–é ä½¿ç”¨ absolute ä»¥å…å½±éŸ¿ Logo ç½®ä¸­ */
            bottom: 50px;
        }

        /* =========================================
           1. Menu é é¢æ•´é«”ä½ˆå±€ (ç½®é ‚èˆ‡é–“è·ç¸®å°)
           ========================================= */
        .page-menu {
            /* æ ¸å¿ƒï¼šå¾é ‚éƒ¨é–‹å§‹æ’åˆ—ï¼Œä¸å†å±…ä¸­ */
            justify-content: flex-start !important; 
            padding-top: 6vh; 
        }

        .page-menu .content-card {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            height: 100%;
            overflow: hidden; /* é˜²æ­¢å¡ç‰‡æœ¬èº«æ²å‹• */
        }

        /* ğŸ’¡ ç¸®å°ã€ŒMenuã€æ¨™é¡Œé–“è· */
        .page-menu h3 {
            margin-top: 40px !important;
            margin-bottom: 20px !important; /* ç·Šè²¼ä¸‹æ–¹æŒ‰éˆ• */
            line-height: 1.2;
        }

        /* ğŸ’¡ ç¸®å°ã€Œåˆ†é¡æŒ‰éˆ•ã€å®¹å™¨é–“è· */
        .page-menu .content-card > div:nth-child(2) {
            margin-bottom: 0px !important; 
        }

                /* ğŸ’¡ ç¸®å°ã€Œåˆ†é¡èªªæ˜æ–‡å­—ã€é–“è· */
        #category-desc {
            margin-top: 0px !important;
            margin-bottom: 15px !important; 
            line-height: 1;
            opacity: 0.8;
        }
        /* =========================================
           2. å•†å“åˆ—è¡¨æ²å‹•å€å¡Š (ä¸è®Šï¼Œä¿ç•™æ ¸å¿ƒé‚è¼¯)
           ========================================= */
        #product-list {
            width: 100%; 
            margin-top: 5px; /* ç·Šè²¼ä¸Šæ–¹èªªæ˜ */
            overflow-y: auto; 
            max-height: 55vh; 
            padding-bottom: 100px; /* é ç•™åº•éƒ¨æŒ‰éˆ•ç©ºé–“ */
            -webkit-overflow-scrolling: touch;
        }

        /* æ²å‹•æ¢ç¾åŒ– */
        #product-list::-webkit-scrollbar { width: 4px; }
        #product-list::-webkit-scrollbar-thumb {
            background: rgba(199, 181, 163, 0.4);
            border-radius: 10px;
        }

        /* =========================================
           3. å•†å“å–®é …èˆ‡å³å´è³‡è¨Š (æ¥µè‡´ç¸®å°è¡Œè·)
           ========================================= */
        .product { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            padding: 8px 12px; /* ç¸®æ¸›å…§è·è®“æ¡†æ¡†è®Šæ‰ */
            background: rgba(255, 255, 255, 0.9);
            margin-bottom: 6px; 
            border-radius: 8px;
            width: 100% !important;
            box-sizing: border-box;
            overflow: hidden;       /* ğŸ’¡ è¶…å‡ºéƒ¨åˆ†éš±è—æˆ–è‡ªå‹•è™•ç† */
        }

        .product-info {
            text-align: left;
            min-width: 0;           /* ğŸ’¡ é€™æ˜¯é˜²æ­¢ Flexbox å…§æ–‡å­—æ’ç ´å®¹å™¨çš„é—œéµæŠ€å·§ */
            flex: 1;
            padding-right: 10px;
        }

        .product-price-section {
            text-align: right;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0px; /* ç§»é™¤åº«å­˜ã€åƒ¹æ ¼ã€æŒ‰éˆ•é–“çš„ç¸«éš™ */
        }

        /* å¼·åˆ¶ç¸®å°å³å´ä¸‰è¡Œæ–‡å­—çš„è¡Œé«˜ */
        .product-price-section span, 
        .product-price-section div {
            line-height: 1.1 !important;
            margin: 0 !important;
        }

        .product-info h4 {
            /* ğŸ’¡ å¦‚æœå­—çœŸçš„å¤ªé•·ï¼Œå…è¨±åœ¨å–®è©å…§æ›è¡Œï¼Œä¸è¦æ’ç ´æ¡†æ¡† */
            overflow-wrap: break-word; 
            word-wrap: break-word;
            font-size: 1.3rem;      /* æ‰‹æ©Ÿç‰ˆå¾®èª¿å•†å“åç¨±å¤§å° */
        }

        /* =========================================
           4. ç´”æ–‡å­—æŒ‰éˆ•æ¨£å¼
           ========================================= */
        .qty-btn {
            background: none !important;
            border: none !important;
            color: var(--accent) !important;
            font-size: 1.5rem !important; 
            padding: 0 10px !important;
            cursor: pointer;
            box-shadow: none !important;
            text-shadow: none !important;
        }
        /* ğŸ’¡ 2. å°è¦½æŒ‰éˆ•ï¼šç§»é™¤æ¡†æ¡†ï¼Œæ”¹ç‚ºåº•ç·šè¨­è¨ˆ */
        .nav-btn {
            background: none !important;
            border: none !important;
            color: var(--accent) !important;
            font-size: 1.4rem !important;
            padding: 10px 0 !important;
            letter-spacing: 2px;
            cursor: pointer;
            box-shadow: none !important;

            /* ğŸ’¡ åŒæ­¥èª¿æ•´ï¼šæ”¹ç‚ºç²—é«”ï¼Œä¸è¦åº•ç·š */
            font-weight: bold !important;
            box-shadow: none !important;
        }

        .nav-footer {
            /* ğŸ’¡ ç§»é™¤åŸæœ¬çš„ position: absolute; left: 50%; transform... */
            position: static; 
            margin-top: auto;   /* ğŸ’¡ æ ¸å¿ƒï¼šæŠŠä¸Šæ–¹å…§å®¹æ¨é–‹ï¼Œè‡ªå‹•ç½®åº• */
            margin-bottom: 50px; /* è·é›¢åº•éƒ¨çš„å®‰å…¨é–“è· */
    
            width: 90%;
            max-width: 650px;
            display: flex;
            flex-direction: column;
            align-items: center; /* ğŸ’¡ æ ¸å¿ƒï¼šç¢ºä¿å…§éƒ¨çš„ç¸½è¨ˆèˆ‡æŒ‰éˆ•æ°´å¹³ç½®ä¸­ */
            gap: 10px;
            box-sizing: border-box;
        }

        .nav-footer .nav-btn {
            width: auto !important;
            margin: 0 auto;
        }

        /* åº«å­˜æ–‡å­—å†ç¸®å°ä¸€é»é» */
        .stock-text {
            font-size: 1.1rem !important;
            margin-bottom: -2px !important; /* ç¨å¾®å¾€ä¸‹æ‹‰è¿‘èˆ‡åƒ¹æ ¼çš„è·é›¢ */
        }

        /* åƒ¹æ ¼å­—é«”å¤§å°ç¶­æŒï¼Œä½†ç§»é™¤é–“è· */
        .price-text {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .progress-bar { position: fixed; top: 0; left: 0; height: 4px; background: var(--accent); transition: width 0.3s; z-index: 1000; }
       
        /* ğŸ’¡ 1. åˆ†é¡é¸æ“‡å€ï¼šæ”¹ç‚ºç´”æ–‡å­—æ„Ÿ */
        .cat-btn {
            background: none !important;
            border: none !important;
            padding: 5px 10px !important;
            cursor: pointer;
            font-size: 1.6rem !important;
            color: #9898ba !important; /* æœªé¸ä¸­æ™‚çš„é¡è‰² */
            transition: color 0.3s;
            box-shadow: none !important;
        }

        /* é¸ä¸­ç‹€æ…‹ï¼šé¡è‰²è®Šç‚ºåŸæœ¬çš„èƒŒæ™¯æ·±è‰² (var(--accent)) */
        .cat-btn.active {
            color: #353569 !important;
            font-weight: bold;
        }
        
        .page-checkout {
            /* æ ¸å¿ƒï¼šå¾é ‚éƒ¨é–‹å§‹æ’åˆ—ï¼Œä¸å†å±…ä¸­ */
            justify-content: flex-start !important; 
            padding-top: 3vh; 
        }

        /* å¦‚æœæ‚¨æœ‰å¹«çµå¸³é é¢çš„ section åŠ å…¥ page-checkout é¡åˆ¥ */
        .page-checkout .content-card  {
            justify-content: flex-start !important;
            padding-top: 0px; /* ğŸ’¡ ç¨å¾®å¾€ä¸Šæ */
        }

        /* ğŸ’¡ 3. æ§åˆ¶å·¦å³å…©å¤§æ¬„ä½çš„é–“è·èˆ‡å½ˆæ€§ */
        .checkout-flex-container {
            display: flex; 
            gap: 30px; /* å¢åŠ å…©æ¬„ä¹‹é–“çš„å‘¼å¸ç©ºé–“ */
            flex-wrap: wrap; 
            width: 100%;
        }

        .checkout-column {
            flex: 1; 
            min-width: 300px; /* ğŸ’¡ ç¨å¾®å¢åŠ æœ€å°å¯¬åº¦ï¼Œè®“å–®æ¬„æ™‚ä¹Ÿå¾ˆå¤§æ°£ */
            max-width: 100%;
            text-align: left;
        }

        #cart-summary {
            /* ğŸ’¡ è®“ç°è‰²æ ¼å­è®Šå¯¬ï¼Œä½”æ»¿çˆ¶å®¹å™¨ç©ºé–“ */
            width: 100%;
            max-width: 600px; 
    
            /* ğŸ’¡ ç¸®å°èˆ‡ä¸Šæ–¹ã€Œè«‹åŒ¯æ¬¾è‡³ã€çš„è·é›¢ */
            margin-top: 0 !important;
            margin-bottom: 15px;
            
            /* ğŸ’¡ èª¿æ•´å…§è·èˆ‡å¤–è§€ */
            background: #f5f5f5;
            padding: 15px !important; /* å¢åŠ å…§è·è®“æ–‡å­—ä¸æ“æ“  */
            border-radius: 8px;
            font-size: 1rem;
            color: #353569;
            box-sizing: border-box;
            text-align: center;
        }

        /* ğŸ’¡ ç¸®å°æ¸…å–®å…§éƒ¨çš„è¡Œé«˜ï¼Œè®“æ–‡å­—æ›´ç·Šæ¹Š */
        #cart-summary br {
            content: "";
            margin: 2px 0;
            display: block;
        }

        #cart-summary hr {
            border: 0;
            border-top: 1px solid #ddd;
            margin: 10px 0;
        }
        /* çµ±ä¸€è¼¸å…¥æ¡†èˆ‡ä¸‹æ‹‰é¸å–®çš„æ¨£å¼ */
        /* è®“å¡«è³‡æ–™çš„æ ¼å­è®Šå°ã€æ›´ç²¾ç·» */
        /* ğŸ’¡ 3. è¼¸å…¥æ¡†èˆ‡ä¸‹æ‹‰é¸å–®ï¼šå…¨éƒ¨æ”¹ç‚ºåº•ç·šå¼ */
        input, select, textarea {
            width: 100%;
            /* ç§»é™¤æ‰€æœ‰é‚Šæ¡†ï¼Œåƒ…ä¿ç•™åº•ç·š */
            border: none !important;
            border-bottom: 1px solid #ddd !important;
            border-radius: 0 !important;
            background-color: transparent !important;
            padding: 5px 0px !important;
            margin-top: 0px;
            font-size: 1.1rem !important;
            color: #1b1b3a;
            outline: none;
            box-sizing: border-box;
        }

        /* ç•¶è¼¸å…¥æ¡†ç²å¾—ç„¦é»æ™‚ï¼Œåº•ç·šè®Šæ·± */
        input:focus, select:focus, textarea:focus {
            border-bottom: 1.5px solid var(--accent) !important;
        }

        input, select, textarea {
            width: 100% !important;
            box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒå¢åŠ å¯¬åº¦ */
            margin-left: 0 !important;
            margin-right: 0 !important;
        }

        /* ä¸‹æ‹‰é¸å–®ç®­é ­å¾®èª¿ */
        select {
            cursor: pointer;
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 10px;
            padding-right: 25px;
            -webkit-appearance: none;
            appearance: none;
            -webkit-appearance: none;
            appearance: none;
            background: none !important;
        }

        #submit-btn {
            width: 100%;
            height: 38px;           /* é«˜åº¦èˆ‡ input æ ¼å­å®Œå…¨ä¸€è‡´ */
            margin-top: 20px;       /* èˆ‡ä¸Šæ–¹è³‡è¨Šéš”é–‹ä¸€è¡Œ */
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.0rem;
            cursor: pointer;
            display: block;         /* ç¢ºä¿å®ƒè‡ªå·±ä½”æ“šä¸€è¡Œ */
        }

        /* è®“ã€Œå›ä¸Šä¸€é ä¿®æ”¹ã€ä¹Ÿé å³ */
        .prev-link-right {
            display: block;
            text-align: right;
            margin-top: 10px;
            font-size: 0.8rem;
            color: #666;
            text-decoration: underline;
            cursor: pointer;
        }

        /* æ¨™ç±¤å°æ¨™é¡Œæ¨£å¼ */
        .form-label {
            font-weight: bold;
            display: block;
            text-align: left;
            font-size: 1.2rem;
            margin-top: 10px;
            color: #353569;
        }

        /* ğŸ’¡ é‡å°æ‰‹æ©Ÿç‰ˆ (è¢å¹•å¯¬åº¦ 600px ä»¥ä¸‹) çš„å¾®èª¿ */
        @media (max-width: 600px) {
            html {
                /* å°‡åŸºç¤å­—ç´šå¾ 20px èª¿é™è‡³ 16px æˆ– 17px */
                font-size: 16px; 
            }
            .content-card {
                padding: 10px; /* ç¸®å°å…§è·ï¼Œç•™æ›´å¤šç©ºé–“çµ¦è¼¸å…¥æ¡† */
            }

            /* é‡å°æ¨™é¡Œå†ç¸®å°ä¸€é»é»ï¼Œé¿å…æ›è¡Œ */
            h1 { font-size: 1.8rem; }
            h3 { font-size: 1.5rem; }

            /* ğŸ’¡ 1. ç¸®å°æ³¨æ„äº‹é …å¤§æ¨™é¡Œï¼Œè®“è¦–è¦ºé‡å¿ƒå¹³è¡¡ */
            .page:nth-of-type(4) h3 {
                font-size: 2.0rem !important;
                margin-top: 50px;
                margin-bottom: 20px !important;
            }

            /* ğŸ’¡ 2. èª¿æ•´åˆ—è¡¨æ–‡å­—æ’åˆ—ï¼šç¨å¾®ç¸®å°å­—ç´šä¸¦å¢åŠ è¡Œè· */
            .page:nth-of-type(4) .chinese-handwriting {
                font-size: 1.3rem !important; /* ç¨å¾®ç¸®å°ï¼Œé¿å…æ›è¡Œé›œäº‚ */
                line-height: 1.8 !important;   /* å¢åŠ è¡Œè·ï¼Œæå‡é–±è®€èˆ’é©åº¦ */
           }

            .page:nth-of-type(4) .prev-link {
                font-size: 1.2rem !important;
            }

            .page:nth-of-type(5) .prev-link {
                font-size: 1.2rem !important;
            }

            .page:nth-of-type(5) h3 {
                font-size: 2.0rem !important;
                margin-top: 50px;
                margin-bottom: 20px !important;
            }

            /* 2. ç¸®å°åˆ†é¡æŒ‰éˆ• (ç•¶æ—¥é£²å“/ç”œé»ç­‰) */
            .cat-btn {
                /* å°‡åŸæœ¬çš„ 1.4rem ç¸®å°ï¼Œä¾‹å¦‚æ”¹ç‚º 1.1remï¼Œé¿å…æŒ‰éˆ•æ“ åœ¨ä¸€èµ· */
                font-size: 1.6rem !important;
                padding: 5px 8px !important; /* åŒæ­¥ç¨å¾®ç¸®å°æŒ‰éˆ•å…§è·ï¼Œçˆ­å–ç©ºé–“ */
            }
    
            .checkout-column {
                min-width: 100%; /* å¼·åˆ¶æ‰‹æ©Ÿç‰ˆä½”æ»¿å…¨å¯¬ */
            }

            /* ğŸ’¡ 4. æ”¾å¤§å¡«è³‡æ–™é …ç›®çš„ã€Œå°æ¨™é¡Œã€ */
            .form-label {
                font-size: 1.5rem !important;
                margin-bottom: 5px !important;
            }

            /* ğŸ’¡ 5. æ”¾å¤§è¼¸å…¥æ¡†å…§å¡«å¯«çš„æ–‡å­—èˆ‡å…§å®¹ */
            input, select, textarea {
                font-size: 1.4rem !important; /* æ”¾å¤§å­—é«”æ–¹ä¾¿é–±è®€èˆ‡ä¿®æ”¹ */
                font-weight: bold !important;
                padding: 12px 0 !important;   /* å¢åŠ é«˜åº¦ï¼Œæ–¹ä¾¿æ‰‹æŒ‡é»é¸ */
            }
    
            #cart-summary {
                font-size: 1.25rem !important;
                padding: 10px !important; /* ç¸®å°è³¼ç‰©æ¸…å–®å…§è· */
            }

            .nav-footer {
                /* ğŸ’¡ 1. ç¸®å°å¤–éƒ¨é–“è·ï¼Œå¾åŸæœ¬çš„ 50px é™åˆ° 20px */
                margin-bottom: 20px !important;
                padding-left: 10px;
                padding-right: 10px;
                padding-bottom: 5px; /* æ‰‹æ©Ÿç‰ˆç•™æ›´å¤šåº•éƒ¨ç©ºé–“é¿å…è¢«å°è¦½åˆ—é®ä½ */
            }

            #product-list {
                width: 100% !important;
                padding-left: 0;
                padding-right: 0;
            }
        }
    </style>
</head>
<body>

<div class="progress-bar" id="progress"></div>

<div class="slider-container" id="slider">
    <section class="page page-p1">
        <div class="content-card">
            <img src="logo.png" style="width: 80%; max-width: 200px; margin: 0 auto;" draggable="false">
        </div>
        <div class="nav-footer">
            <div class="handwriting-natural" style="opacity: 0.6; font-size: 0.8rem; letter-spacing: 2px;">
                ã€ˆ å‘å·¦æ»‘å‹• ã€‰
            </div>
        </div>
    </section>

    <section class="page page-p1">
        <div class="content-card">
            <h1 style="color: #353569;font-size: 2.8rem;">é—œæ–¼ <span style="handwriting-elegant; font-size: 2.8rem;">Deep Coffee</span></h1>
            <p class="chinese-handwriting" style="color: #353569; font-size: 1.8rem;">æˆ‘å€‘å …æŒé›²ç«¯åŒæ­¥å³æ™‚åº«å­˜ï¼Œç¢ºä¿æ¯ä¸€å£éƒ½æ˜¯æ–°é®®ã€‚</p>
        </div>
        <div class="nav-footer">
            <div class="handwriting-natural" style="opacity: 0.6; font-size: 0.8rem; letter-spacing: 2px;">ã€ˆ å‘å·¦æ»‘å‹• ã€‰</div>
        </div>
        
    </section>

    <section class="page page-menu">
        <div class="content-card">
            <h3 class="handwriting-elegant" style="margin-top:0; color: #353569; font-size: 3.2rem;">Menu</h3>
            <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 15px;">
                <button class="nav-btn cat-btn" style="padding: 5px 12px;" onclick="renderProductsByCat('ç•¶æ—¥é£²å“')">ç•¶æ—¥é£²å“</button>
                <button class="nav-btn cat-btn" style="padding: 5px 12px;" onclick="renderProductsByCat('ç•¶æ—¥ç”œé»')">ç•¶æ—¥ç”œé»</button>
                <button class="nav-btn cat-btn" style="padding: 5px 12px;" onclick="renderProductsByCat('é ç´„ç”œé»')">é ç´„ç”œé»</button>
            </div>
            <div id="category-desc" style="font-size: 1.2rem; color: #888; margin-bottom: 15px; text-align: center; font-weight: bold;">
                åœ¨ç‰¹å®šæ™‚æ®µä¾†åº—å–è²¨
            </div>
            <div id="product-list">è¼‰å…¥ä¸­...</div>
            <div class="nav-footer">
                <div style="margin-top:15px; text-align:right; font-weight:bold; font-size:1.2rem; color: #353569;">
                    è³¼ç‰©è»Š(<span id="count">0</span>) ç¸½è¨ˆ: $<span id="total">0</span>
                </div>
                <button class="nav-btn" onclick="showCheckout()" style = "text-decoration: underline;">å‰å¾€çµå¸³</button>                
            </div>
        </div>
    </section>

    <section class="page">
        <div class="content-card">
            <h3 style="color:#353569;font-size: 2.8rem;">âš ï¸ æ³¨æ„äº‹é …</h3>
            <p class="chinese-handwriting" style = "font-size: 1.4rem; text-align: left;">
            1. å¦‚è³¼è²·ç•¶æ—¥ç”œé»ï¼Œè«‹å‹™å¿…è¨˜å¾—åœ¨æ‰€é¸æ™‚æ®µå…§å–è²¨ã€‚ <br>
            2. è‹¥åŒæ™‚è³¼è²·ç•¶æ—¥å•†å“èˆ‡é è³¼ç”œé»ï¼Œæˆ‘å€‘å°‡åˆ†é–‹å‡ºè²¨ã€‚<br>
            3. è¨‚å–®æˆç«‹ä»˜æ¬¾å¾Œ åƒ…èƒ½æ›ç­‰å€¼å•†å“ ç„¡æ³•é€€æ¬¾ã€‚<br>
            4. å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œæ­¡è¿æ–¼çµå¸³é é¢å‘ŠçŸ¥ï¼Œæˆ–æ˜¯ç§è¨Š deep coffee IGã€‚<br><br>
            </p>
            <p class="chinese-handwriting" style = "font-size: 1.4rem;">
            è¬è¬æ‚¨ <br>
            ç”¢å“çš†ç‚ºæ‰‹å·¥è£½ä½œ ä¸åŠ ä»»ä½•é˜²è…åŠ‘ è«‹ç›¡æ—©äº«ç”¨ã€‚<br><br></p>
            <button class="nav-btn" onclick="nextPage()" style = "text-decoration: underline;">æˆ‘å·²äº†è§£</button>
            <span class="prev-link" style = "font-size: 1rem;" onclick="prevPage()">è¿”å›ä¿®æ”¹è³¼ç‰©è»Š</span>
        </div>
    </section>
        
    <section class="page page-checkout">
        <div class="content-card" style="max-width: 650px;">
            <h3 style="margin-bottom: 10px; font-size: 1.8rem; color: #353569;">çµå¸³è³‡è¨Š</h3>
            <div style="font-weight: bold; font-size: 1.4rem; margin-top: 0px; margin-bottom: 5px; color: #3e2723;">è«‹åŒ¯æ¬¾è‡³</div>
            <div id="cart-summary" style="font-size:1.2rem; background:#f5f5f5; padding:10px; border-radius:8px; margin-bottom:15px;"></div>
    
            <div class="checkout-flex-container">
                <div class="checkout-column">
                    <label class="form-label">é¡§å®¢å§“å / IG ID</label>
                    <input type="text" id="user-name" placeholder="è«‹è¼¸å…¥å§“åæˆ– IG ID">
    
                    <label class="form-label">æ‰‹æ©Ÿè™Ÿç¢¼</label>
                    <input type="tel" id="user-phone" placeholder="è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼">
    
                    <label class="form-label">å¸³è™Ÿå¾Œäº”ç¢¼</label>
                    <input type="tel" id="account-tail" placeholder="è«‹è¼¸å…¥ 5 ä½æ•¸å­—" maxlength="5">
                </div>
    
                <div class="checkout-column">
                    <div id="method-container" style="display: none;">
                        <label class="form-label">å–è²¨æ–¹å¼</label>
                        <select id="pickup-method">
                            <option value="é ç´„è‡ªå–">é ç´„è‡ªå–</option>
                            <option value="å®…é…">å®…é…</option>
                        </select>
                    </div>
                
                    <div id="pickup-slot-section" style="display: none;">
                        <label class="form-label">è‡ªå–æ™‚æ®µ (ç•¶æ—¥é£²å“/ç”œé»)</label>
                        <select id="pickup-time" onchange="toggleSpecialNote()">
                            <option value="ä¸Šåˆ">ä¸Šåˆ (10:00 - 12:00)</option>
                            <option value="ä¸‹åˆ">ä¸‹åˆ (14:00 - 18:00)</option>
                            <option value="ç‰¹æ®Šéœ€æ±‚">ç‰¹æ®Šéœ€æ±‚</option>
                        </select>
                        
                        <div id="special-note-container" style="display: none; margin-top: 10px;">
                            <label class="form-label" style="font-size: 1.0rem; color: #353569;">è«‹è¼¸å…¥æ‚¨çš„ç‰¹æ®Šéœ€æ±‚ï¼Œ<br>æˆ‘å€‘æœƒç›¡å¿«èˆ‡æ‚¨è¯ç¹«ï¼</label>
                            <textarea id="special-note" rows="2" placeholder="ä¾‹å¦‚ï¼šé è¨ˆæŠµé”æ™‚é–“..." 
                                      style="width: 100%;font-size: 1.0rem; padding: 8px; border-radius: 6px; border: 1px solid #ddd;"></textarea>
                        </div>
                    </div>
                
                    <div id="delivery-info-section" style="display: none; margin-top: 15px;">
                        <label class="form-label">å®…é…é…é€è³‡è¨Š (é ç´„ç”œé»)</label>
                        <input type="date" id="delivery-date" style="margin-bottom: 8px;">
                        <input type="text" id="delivery-address" placeholder="è«‹è¼¸å…¥å®Œæ•´æ”¶ä»¶åœ°å€">
                    </div>
                </div>
            </div>
    
            <div class="nav-footer">
                <button class="nav-btn" id="submit-btn" onclick="submitOrder()" style = "text-decoration: underline;">ç¢ºèªä¸¦æäº¤è¨‚å–®</button>
                <span class="prev-link" style="font-size: 1rem;" onclick="prevPage()">å›ä¸Šä¸€é ä¿®æ”¹</span>
            </div>
        </div>
    </section>
        
    <section class="page">
        <div class="content-card" style="text-align:center;">
            <h3>è¨‚å–®å·²ç¢ºèªæˆç«‹ä¸¦æäº¤</h3>
            <p>æ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼Œè«‹ç­‰å€™é€šçŸ¥ã€‚</p>
            <button class="nav-btn" onclick="location.reload()">å›é¦–é å†æ¬¡é»é¤</button>
            <div style="margin-top: 20px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 20px;">
                <p style="font-size: 1.2rem; color: #353569;">æ›´å¤šé—œæ–¼æˆ‘å€‘ï¼š</p>
                
                <a href="https://www.instagram.com/deepcoffee241?igsh=NGE2MzZvcTIzNHM5" target="_blank" class="nav-btn" 
                   style="display: block; text-decoration: none; background: var(--accent); margin-bottom: 10px;">
                    Deep Coffee IG
                </a>
                <a href="https://www.instagram.com/deepairbnb?igsh=MXVmYzFsdWNsd3J6" target="_blank" class="nav-btn" 
                   style="display: block; text-decoration: none; background: var(--accent); margin-bottom: 10px;">
                    Deep Airbnb IG
                </a>
                <a href="https://www.instagram.com/abril24_estudio?igsh=dGR6NzUzZGMxZmpi" target="_blank" class="nav-btn" 
                   style="display: block; text-decoration: none; background: var(--accent); margin-bottom: 10px;">
                    Abril 24 Estudio å·¥ä½œå®¤ IG
                </a>
                <a href="https://www.instagram.com/3v.antique?igsh=dHg2ZHEyNHR0dDFo" target="_blank" class="nav-btn" 
                   style="display: block; text-decoration: none; background: var(--accent); margin-bottom: 10px;">
                    3v.antique IG
                </a>
                
            </div>
        </div>
    </section>
</div>

<script>
let startX = 0;
let currentPage = 0;
let cart = [];
let products = [];
const slider = document.getElementById('slider');
const GAS_API = 'https://script.google.com/macros/s/AKfycbxAuM_YOnaQLaDzCfIXmsucHLfQqEzC8qfvMdlfIC9_m2yclWLIcXuaiZcihe2ZyzVg/exec'; 

// --- æ»‘å‹•èˆ‡å°è¦½æ§åˆ¶ ---
window.addEventListener('touchstart', e => { startX = e.touches[0].clientX; }, {passive: true});
window.addEventListener('touchend', e => {
    let diff = startX - e.changedTouches[0].clientX;
    if (Math.abs(diff) > 50) {
        if (diff > 0 && currentPage < 2) nextPage(); 
        if (diff < -50 && currentPage > 0) prevPage();
    }
}, {passive: true});

window.addEventListener('mousedown', e => {
    startX = e.clientX;
    const handleMouseUp = (me) => {
        let diff = startX - me.clientX;
        if (Math.abs(diff) > 50) {
            if (diff > 50 && currentPage < 2) nextPage();
            if (diff < -50 && currentPage > 0) prevPage();
        }
        window.removeEventListener('mouseup', handleMouseUp);
    };
    window.addEventListener('mouseup', handleMouseUp);
});

function nextPage() {
    // æª¢æŸ¥ï¼šå•†å“æ¸…å–®é  (Index 2)
    if (currentPage === 2) {
        if (cart.length === 0) {
            alert('æ‚¨çš„è³¼ç‰©è»Šé‚„æ˜¯ç©ºçš„ï¼Œè«‹å…ˆæŒ‘é¸å•†å“ï¼');
            return;
        }
        updateCheckoutSummary();
    }

    // æª¢æŸ¥ï¼šçµå¸³è³‡è¨Šé  (Index 4)
    if (currentPage === 4) {
        const phone = document.getElementById('user-phone').value;
        const tail = document.getElementById('account-tail').value;
        if (!phone || phone.length < 9) {
            alert('è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼ï¼');
            return;
        }
        if (!tail || tail.length !== 5) {
            alert('è«‹è¼¸å…¥æ­£ç¢ºçš„å¸³è™Ÿå¾Œäº”ç¢¼ï¼');
            return;
        }
    }

    if (currentPage < 5) { 
        currentPage++; 
        updateSlider(); 
    }
}

function prevPage() { if (currentPage > 0) { currentPage--; updateSlider(); } }

function updateSlider() {
    slider.style.transform = `translateX(-${currentPage * (100 / 6)}%)`;
    document.getElementById('progress').style.width = `${((currentPage + 1) / 6) * 100}%`;
}

// --- è³‡æ–™è™•ç†èˆ‡çµå¸³ ---
async function init() {
    try {
        const resp = await fetch(GAS_API);
        products = await resp.json();
        // ä¸è¦ç›´æ¥å‘¼å« renderProductsï¼Œæ”¹å‘¼å« renderProductsByCat ä¾†å•Ÿå‹•è®Šè‰²èˆ‡èªªæ˜
        renderProductsByCat('ç•¶æ—¥é£²å“');
    } catch (err) {
        document.getElementById('product-list').innerHTML = "ç›®å‰ç„¡æ³•é€£ç·šè‡³è³‡æ–™åº«";
    }
}

let currentCategory = 'ç•¶æ—¥é£²å“';
function renderProductsByCat(cat) {
    currentCategory = cat;
    // å–å¾—èªªæ˜æ–‡å­—çš„å€å¡Š
    const descDiv = document.getElementById('category-desc');
    
    // æ ¹æ“šé¡åˆ¥åç¨±åˆ‡æ›æ–‡å­—
    if (cat === 'é ç´„ç”œé»') {
        descDiv.innerText = 'åƒ…ä»¥å®…é…æ–¹å¼é€è²¨';
    } else {
        // ç•¶æ—¥é£²å“ æˆ– ç•¶æ—¥ç”œé»
        descDiv.innerText = 'åœ¨ç‰¹å®šæ™‚æ®µä¾†åº—å–è²¨';
    }

    const buttons = document.querySelectorAll('.cat-btn');
    buttons.forEach(btn => {
        if (btn.innerText === cat) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });

    renderProducts(products); // åŸ·è¡Œéæ¿¾èˆ‡æ¸²æŸ“
}

function renderProducts(data) {
    const listDiv = document.getElementById('product-list');
    const filteredData = data.filter(p => p.category && p.category.trim() === currentCategory);

    if (filteredData.length === 0) {
        listDiv.innerHTML = `<div style="padding:20px; color:#888;">ã€${currentCategory}ã€‘ç›®å‰ç„¡å•†å“</div>`;
        return;
    }

    listDiv.innerHTML = filteredData.map((p) => {
        const realIndex = products.findIndex(item => item.name === p.name);
        const cartItem = cart.find(item => item.name === p.name);
        const count = cartItem ? cartItem.qty : 0;
        const currentAvailable = p.stock - count;
        const out = currentAvailable <= 0;

        return `
            <div class="product">
                <div class="product-info">
                    <h4 style="margin:0; font-size:1.6rem;">${p.name}</h4>
                </div>
                
                <div class="product-price-section">
                    <span class="stock-text" style="color:${out ? '#ff4d4d' : '#888'};">
                        ${out ? 'å·²å”®å®Œ' : 'å‰©é¤˜ ' + currentAvailable}
                    </span>
                    
                    <div class="price-text">$${p.price}</div>
                    
                    <div class="qty-controls">
                        ${count > 0 ? `
                            <button class="qty-btn" onclick="removeFromCart(${realIndex})">âˆ’</button>
                            <span style="font-weight:bold; min-width:20px; text-align:center; font-size:1rem;">${count}</span>
                        ` : ''}
                        <button class="qty-btn" onclick="addToCart(${realIndex})" ${out?'style="opacity:0.2" disabled':''}>+</button>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

function addToCart(index) {
    const p = products[index];
    const item = cart.find(c => c.name === p.name);
    
    if(item) {
        if(item.qty >= p.stock) return alert('åº«å­˜ä¸è¶³');
        item.qty++;
    } else {
        cart.push({ name: p.name, price: p.price, qty: 1 });
    }
    
    // ã€æ›´æ–°ã€‘é‡æ–°æ¸²æŸ“å•†å“åˆ—è¡¨ï¼Œè®“æŒ‰éˆ•æ—çš„æ•¸å­—æ›´æ–°
    renderProducts(products);
    updateUI();
}

function removeFromCart(index) {
    const p = products[index];
    const itemIndex = cart.findIndex(c => c.name === p.name);
    
    if (itemIndex > -1) {
        if (cart[itemIndex].qty > 1) {
            cart[itemIndex].qty--;
        } else {
            cart.splice(itemIndex, 1); // æ•¸é‡ç‚º 1 æ™‚ï¼Œç›´æ¥å¾é™£åˆ—ç§»é™¤
        }
    }
    
    renderProducts(products); // é‡æ–°æ¸²æŸ“åˆ—è¡¨
    updateUI(); // æ›´æ–°ç¸½é‡‘é¡èˆ‡æ•¸é‡é¡¯ç¤º
}

function updateUI() {
    document.getElementById('count').innerText = cart.reduce((a, b) => a + b.qty, 0);
    document.getElementById('total').innerText = cart.reduce((a, b) => a + (b.price * b.qty), 0);
}

function updateCheckoutSummary() {
    let total = document.getElementById('total').innerText;
    let summary = cart.map(i => `${i.name} x ${i.qty}`).join("<br>");
    document.getElementById('cart-summary').innerHTML = summary + "<hr>ç¸½è¨ˆ: $" + total;
}

function showCheckout() {
    // 1. åµæ¸¬è³¼ç‰©è»Šå…§å®¹é¡åˆ¥
    const categories = cart.map(item => {
        const p = products.find(prod => prod.name === item.name);
        return p ? p.category.trim() : "";
    });

    const hasDaily = categories.some(cat => cat === 'ç•¶æ—¥é£²å“' || cat === 'ç•¶æ—¥ç”œé»');
    const hasPreorder = categories.some(cat => cat === 'é ç´„ç”œé»');

    // 2. æ ¹æ“šé¡åˆ¥é¡¯ç¤º/éš±è—å€å¡Š
    document.getElementById('pickup-slot-section').style.display = hasDaily ? 'block' : 'none';
    document.getElementById('delivery-info-section').style.display = hasPreorder ? 'block' : 'none';

    // 3. è¨­å®šå¾Œå°ç´€éŒ„ç”¨çš„å–è²¨æ–¹å¼
    let methodValue = "";
    if (hasDaily && hasPreorder) methodValue = "è‡ªå–+å®…é…";
    else if (hasDaily) methodValue = "é ç´„è‡ªå–";
    else if (hasPreorder) methodValue = "é ç´„å®…é…";
    document.getElementById('pickup-method').value = methodValue;

    updateCheckoutSummary();
    nextPage();
}

// åˆ‡æ›é¡¯ç¤ºé‚è¼¯
function togglePickupFields() {
    const method = document.getElementById('pickup-method').value;
    const selfFields = document.getElementById('self-pickup-fields');
    const deliveryFields = document.getElementById('delivery-fields');
    

    if (method === 'é ç´„è‡ªå–') {
        selfFields.style.display = 'block';
        deliveryFields.style.display = 'none';
    } else {
        selfFields.style.display = 'none';
        deliveryFields.style.display = 'block';
    }
}

function toggleSpecialNote() {
    const pickupTime = document.getElementById('pickup-time').value;
    const noteContainer = document.getElementById('special-note-container');
    
    // å¦‚æœé¸ä¸­ã€Œç‰¹æ®Šéœ€æ±‚ã€ï¼Œå°±é¡¯ç¤ºè¼¸å…¥æ¡†ï¼Œå¦å‰‡éš±è—
    if (pickupTime === 'ç‰¹æ®Šéœ€æ±‚') {
        noteContainer.style.display = 'block';
    } else {
        noteContainer.style.display = 'none';
    }
}

async function submitOrder() {
    const name = document.getElementById('user-name').value;
    const phone = document.getElementById('user-phone').value;
    const accountTail = document.getElementById('account-tail').value;
    
    // å–å¾—å€å¡Šé¡¯ç¤ºç‹€æ…‹
    const showPickup = document.getElementById('pickup-slot-section').style.display === 'block';
    const showDelivery = document.getElementById('delivery-info-section').style.display === 'block';

    if (!name || !phone || accountTail.length !== 5) {
        return alert('è«‹å®Œæ•´å¡«å¯«å§“åã€æ‰‹æ©Ÿèˆ‡å¸³è™Ÿå¾Œäº”ç¢¼ï¼');
    }

    let details = [];
    
    // é©—è­‰è‡ªå–æ™‚æ®µ (ç•¶æ—¥å•†å“)
    if (showPickup) {
    const time = document.getElementById('pickup-time').value;
    if (time === 'ç‰¹æ®Šéœ€æ±‚') {
        const note = document.getElementById('special-note').value;
        if (!note) return alert('è«‹å¡«å¯«æ‚¨çš„ç‰¹æ®Šéœ€æ±‚ç´°ç¯€ï¼');
        details.push(`è‡ªå–: ç‰¹æ®Šéœ€æ±‚ (${note})`);
    } else {
        details.push(`è‡ªå–æ™‚æ®µ: ${time}`);
    }
    }

    // é©—è­‰æ—¥æœŸèˆ‡åœ°å€ (é ç´„å•†å“)
    if (showDelivery) {
        const date = document.getElementById('delivery-date').value;
        const addr = document.getElementById('delivery-address').value;
        if (!date || !addr) return alert('è«‹å®Œæ•´å¡«å¯«å®…é…æ—¥æœŸèˆ‡åœ°å€ï¼');
        details.push(`å®…é…æ—¥æœŸ: ${date} / åœ°å€: ${addr}`);
    }

    const btn = document.getElementById('submit-btn');
    btn.disabled = true;
    btn.innerText = "è¨‚å–®å‚³é€ä¸­...";

    const orderData = {
        name: name,
        phone: phone,
        accountTail: accountTail,
        pickupMethod: document.getElementById('pickup-method').value,
        pickupDetail: details.join(" | "), // åˆä½µè³‡è¨Šå¯«å…¥è©¦ç®—è¡¨ I æ¬„
        cart: cart,
        totalAmount: document.getElementById('total').innerText
    };

    try {
        const resp = await fetch(GAS_API, { method: 'POST', body: JSON.stringify(orderData) });
        const result = await resp.json();
        if (result.status === "Success") {
            currentPage = 5;
            updateSlider();
        } else {
            alert('ç³»çµ±éŒ¯èª¤: ' + result.message);
            btn.disabled = false;
            btn.innerText = "ç¢ºèªä¸¦æäº¤è¨‚å–®";
        }
    } catch (err) {
        alert('æäº¤å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·š');
        btn.disabled = false;
        btn.innerText = "ç¢ºèªä¸¦æäº¤è¨‚å–®";
    }
}

init();
updateSlider();
</script>
</body>
</html>